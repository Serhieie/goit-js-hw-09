{"mappings":"iiBAuDA,IAAAA,EAAAC,EAAA,SACAC,EAAAF,GAASG,OAAOC,KAAK,CACnBC,MAAO,QACPC,SAAU,YACVC,aAAa,IAGf,IAAIC,EAAQ,EACRC,EAAa,EACXC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,MAAOF,SAASC,cAAc,uBAC9BE,KAAMH,SAASC,cAAc,sBAC7BG,OAAQJ,SAASC,cAAc,yBAwBjC,SAASI,EAAcX,EAAUQ,GACf,IAAII,SAAQ,SAACC,EAAKC,GACVC,KAAKC,SAAW,GAEpCH,EAAI,CAAEb,WAAUQ,UAEhBM,EAAI,CAAEd,WAAUQ,S,IAIjBS,MAAK,SAAAC,GAAWA,EAARlB,SAAekB,EAALV,MACjBZ,EAAAF,GAASG,OAAOsB,QACd,uBAAqCC,OAAZlB,EAAM,QAAiBkB,OAAXjB,EAAW,M,IAGnDkB,OAAM,SAAAH,GAAWA,EAARlB,SAAekB,EAALV,MAClBZ,EAAAF,GAASG,OAAOyB,QACd,sBAAkCF,OAAZlB,EAAM,QAAiBkB,OAAXjB,EAAW,M,IAtCrDC,EAAKC,KAAKkB,iBAAiB,UAAU,SAAAC,GACnCtB,EAAQ,EACRsB,EAAIC,iBACJC,YAAW,WACTxB,EAAQ,EACRS,EAAcgB,OAAOvB,EAAKK,KAAKmB,OAAQD,OAAOvB,EAAKI,MAAMoB,QACzDzB,EAAawB,OAAOvB,EAAKI,MAAMoB,OAC/B,IAAMC,EAAaC,aAAY,WAC7B3B,GAAcwB,OAAOvB,EAAKK,KAAKmB,OAC/B1B,GAAS,EACTS,EAAcgB,OAAOvB,EAAKK,KAAKmB,OAAQD,OAAOvB,EAAKI,MAAMoB,QACrD1B,GAASyB,OAAOvB,EAAKM,OAAOkB,SAC9BxB,EAAKK,KAAKmB,MAAQ,GAClBxB,EAAKI,MAAMoB,MAAQ,GACnBxB,EAAKM,OAAOkB,MAAQ,GACpBG,cAAcF,G,GAEfF,OAAOvB,EAAKK,KAAKmB,O,GACnBD,OAAOvB,EAAKI,MAAMoB,O","sources":["src/js/03-promises.js"],"sourcesContent":["// import Notiflix from 'notiflix';\n// Notiflix.Notify.init({\n//   width: '300px',\n//   position: 'right-top',\n//   closeButton: false,\n// });\n\n// let count = 0;\n\n// const refs = {\n//   form: document.querySelector('.form'),\n//   delay: document.querySelector('input[name=\"delay\"]'),\n//   step: document.querySelector('input[name=\"step\"]'),\n//   amount: document.querySelector('input[name=\"amount\"]'),\n// };\n\n// refs.form.addEventListener('submit', evt => {\n//   evt.preventDefault();\n//   createPromise(refs.step.value, refs.delay.value);\n// });\n\n// function createPromise(position, delay) {\n//   return new Promise((res, rej) => {\n//     setTimeout(() => {\n//       let result = parseFloat(delay);\n//       let positionNum = parseFloat(position);\n//       const intervalId = setInterval(() => {\n//         count += 1;\n//         const shouldResolve = Math.random() > 0.3;\n//         if (shouldResolve) {\n//           res(\n//             Notiflix.Notify.success(\n//               `✅ Fulfilled promise ${count} in ${result}ms`\n//             )\n//           );\n//         } else {\n//           rej(\n//             Notiflix.Notify.failure(\n//               `❌ Rejected promise ${count} in ${result}ms`\n//             )\n//           );\n//         }\n//         result += positionNum;\n//         if (count === Number(refs.amount.value)) {\n//           refs.step.value = '';\n//           refs.delay.value = '';\n//           refs.amount.value = '';\n//           clearInterval(intervalId);\n//           count = 0;\n//         }\n//       }, position);\n//     }, delay);\n//   });\n// }\n\nimport Notiflix from 'notiflix';\nNotiflix.Notify.init({\n  width: '300px',\n  position: 'right-top',\n  closeButton: false,\n});\n\nlet count = 0;\nlet totalDelay = 0;\nconst refs = {\n  form: document.querySelector('.form'),\n  delay: document.querySelector('input[name=\"delay\"]'),\n  step: document.querySelector('input[name=\"step\"]'),\n  amount: document.querySelector('input[name=\"amount\"]'),\n};\n\nrefs.form.addEventListener('submit', evt => {\n  count = 0;\n  evt.preventDefault();\n  setTimeout(() => {\n    count = 1;\n    createPromise(Number(refs.step.value), Number(refs.delay.value));\n    totalDelay = Number(refs.delay.value);\n    const intervalId = setInterval(() => {\n      totalDelay += Number(refs.step.value);\n      count += 1;\n      createPromise(Number(refs.step.value), Number(refs.delay.value));\n      if (count >= Number(refs.amount.value)) {\n        refs.step.value = '';\n        refs.delay.value = '';\n        refs.amount.value = '';\n        clearInterval(intervalId);\n      }\n    }, Number(refs.step.value));\n  }, Number(refs.delay.value));\n});\n\nfunction createPromise(position, delay) {\n  const promise = new Promise((res, rej) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      res({ position, delay });\n    } else {\n      rej({ position, delay });\n    }\n  });\n  promise\n    .then(({ position, delay }) => {\n      Notiflix.Notify.success(\n        `✅ Fulfilled promise ${count} in ${totalDelay}ms`\n      );\n    })\n    .catch(({ position, delay }) => {\n      Notiflix.Notify.failure(\n        `❌ Rejected promise ${count} in ${totalDelay}ms`\n      );\n    });\n}\n"],"names":["$6JpON","parcelRequire","$parcel$interopDefault","Notify","init","width","position","closeButton","$ce04d3a99e08e73b$var$count","$ce04d3a99e08e73b$var$totalDelay","$ce04d3a99e08e73b$var$refs","form","document","querySelector","delay","step","amount","$ce04d3a99e08e73b$var$createPromise","Promise","res","rej","Math","random","then","param","success","concat","catch","failure","addEventListener","evt","preventDefault","setTimeout","Number","value","intervalId","setInterval","clearInterval"],"version":3,"file":"03-promises.e651351e.js.map"}